
<div class="flex h-screen flex-col md:flex-row bg-stone-50">
  <!-- Sidebar / Navbar -->
  <aside class="w-full md:w-64 bg-white border-r border-stone-200 flex flex-col shadow-sm no-print z-10">
    <div class="p-6 border-b border-stone-100 flex items-center justify-center">
      <h1 class="text-2xl font-bold text-stone-700 tracking-wider">☁️ 云端日记</h1>
    </div>

    <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
      <a routerLink="/feed" routerLinkActive="bg-stone-100 text-stone-900 font-semibold" 
         class="flex items-center gap-3 px-4 py-3 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S13.632 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.632 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" />
        </svg>
        公共广场
      </a>

      @if (auth.currentUser()) {
        <a routerLink="/write" routerLinkActive="bg-stone-100 text-stone-900 font-semibold"
           class="flex items-center gap-3 px-4 py-3 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
          </svg>
          写日记
        </a>
        <a routerLink="/personal" routerLinkActive="bg-stone-100 text-stone-900 font-semibold"
           class="flex items-center gap-3 px-4 py-3 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
          </svg>
          个人中心
        </a>
      } @else {
        <a routerLink="/login" routerLinkActive="bg-stone-100 text-stone-900 font-semibold"
           class="flex items-center gap-3 px-4 py-3 rounded-lg text-stone-600 hover:bg-stone-50 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75" />
          </svg>
          登录 / 注册
        </a>
      }
    </nav>

    @if (auth.currentUser()) {
      <div class="p-4 border-t border-stone-100">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">
            {{ auth.currentUser()?.username?.charAt(0)?.toUpperCase() }}
          </div>
          <div class="flex-1 overflow-hidden">
            <p class="text-sm font-medium truncate">{{ auth.currentUser()?.username }}</p>
            @if (auth.isAdmin()) {
              <span class="text-xs text-amber-600 bg-amber-50 px-1 rounded">管理员</span>
            }
          </div>
        </div>
        <button (click)="logout()" class="w-full text-sm text-red-500 hover:bg-red-50 py-2 rounded text-left px-2">
          退出登录
        </button>
      </div>
    }
  </aside>

  <!-- Main Content -->
  <main class="flex-1 overflow-y-auto relative scroll-smooth bg-stone-50/50">
    <div class="max-w-4xl mx-auto p-4 md:p-8 min-h-full">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
